// Copyright 2026 Synnax Labs, Inc.
//
// Use of this software is governed by the Business Source License included in the file
// licenses/BSL.txt.
//
// As of the Change Date specified in that file, in accordance with the Business Source
// License, use of this software will be governed by the Apache License, Version 2.0,
// included in the file licenses/APL.txt.

// Code generated by oracle. DO NOT EDIT.

#pragma once

#include <string>
#include <utility>
#include <vector>

#include "x/cpp/errors/errors.h"
#include "x/cpp/json/json.h"
#include "x/cpp/spatial/types.gen.h"

#include "arc/cpp/ir/types.gen.h"
#include "arc/go/graph/pb/graph.pb.h"

namespace arc::graph {

struct Node;
struct Viewport;
struct Graph;

/// @brief Node is a visual node in the Arc graph editor representing a function
/// instantiation with position data.
struct Node {
    /// @brief key is the unique identifier for this node instance.
    std::string key;
    /// @brief type is the function type being instantiated.
    std::string type;
    /// @brief config contains configuration parameter values as a JSON object.
    x::json::json config;
    /// @brief position is the canvas position (x, y) for visual layout.
    ::x::spatial::XY position;

    static Node parse(x::json::Parser parser);
    [[nodiscard]] x::json::json to_json() const;

    using proto_type = ::arc::graph::pb::Node;
    [[nodiscard]] ::arc::graph::pb::Node to_proto() const;
    static std::pair<Node, x::errors::Error>
    from_proto(const ::arc::graph::pb::Node &pb);
};

/// @brief Viewport is the camera state for viewing the Arc graph editor canvas.
struct Viewport {
    /// @brief position is the camera pan offset (x, y).
    ::x::spatial::XY position;
    /// @brief zoom is the zoom level where 1.0 equals 100%.
    double zoom = 0;

    static Viewport parse(x::json::Parser parser);
    [[nodiscard]] x::json::json to_json() const;

    using proto_type = ::arc::graph::pb::Viewport;
    [[nodiscard]] ::arc::graph::pb::Viewport to_proto() const;
    static std::pair<Viewport, x::errors::Error>
    from_proto(const ::arc::graph::pb::Viewport &pb);
};

struct Nodes : private std::vector<Node> {
    using Base = std::vector<Node>;

    // Inherit constructors - these are instantiated at point of use, not declaration
    using Base::Base;
    Nodes() = default;

    // Container interface
    using Base::begin;
    using Base::capacity;
    using Base::cbegin;
    using Base::cend;
    using Base::const_iterator;
    using Base::const_reference;
    using Base::const_reverse_iterator;
    using Base::crbegin;
    using Base::crend;
    using Base::difference_type;
    using Base::empty;
    using Base::end;
    using Base::iterator;
    using Base::max_size;
    using Base::rbegin;
    using Base::reference;
    using Base::rend;
    using Base::reserve;
    using Base::reverse_iterator;
    using Base::shrink_to_fit;
    using Base::size;
    using Base::size_type;
    using Base::value_type;
    using Base::operator[];
    using Base::assign;
    using Base::at;
    using Base::back;
    using Base::clear;
    using Base::data;
    using Base::emplace;
    using Base::emplace_back;
    using Base::erase;
    using Base::front;
    using Base::insert;
    using Base::pop_back;
    using Base::push_back;
    using Base::resize;
    using Base::swap;

    static Nodes parse(x::json::Parser parser);
    [[nodiscard]] x::json::json to_json() const;
};

/// @brief Graph is a visual dataflow graph representation combining IR elements with
/// canvas layout for the Arc graph editor.
struct Graph {
    /// @brief viewport is the current camera state for the graph view.
    Viewport viewport;
    /// @brief functions contains function definitions available in this graph.
    ::arc::ir::Functions functions;
    /// @brief edges contains dataflow connections between node parameters.
    ::arc::ir::Edges edges;
    /// @brief nodes contains visual nodes with canvas positions.
    Nodes nodes;

    static Graph parse(x::json::Parser parser);
    [[nodiscard]] x::json::json to_json() const;

    using proto_type = ::arc::graph::pb::Graph;
    [[nodiscard]] ::arc::graph::pb::Graph to_proto() const;
    static std::pair<Graph, x::errors::Error>
    from_proto(const ::arc::graph::pb::Graph &pb);
};
}
