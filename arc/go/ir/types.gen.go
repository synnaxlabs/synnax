// Copyright 2026 Synnax Labs, Inc.
//
// Use of this software is governed by the Business Source License included in the file
// licenses/BSL.txt.
//
// As of the Change Date specified in that file, in accordance with the Business Source
// License, use of this software will be governed by the Apache License, Version 2.0,
// included in the file licenses/APL.txt.

// Code generated by oracle. DO NOT EDIT.

package ir

import (
	"github.com/antlr4-go/antlr/v4"
	"github.com/synnaxlabs/arc/symbol"
	"github.com/synnaxlabs/arc/types"
)

type Edges []Edge

type Stages []Stage

type Sequences []Sequence

type Functions []Function

type Strata []Stratum

type Nodes []Node

type Stratum = []string

type EdgeKind uint8

const (
	EdgeKindContinuous EdgeKind = iota + 1
	EdgeKindOneShot
)

type Handle struct {
	Node  string `json:"node" msgpack:"node"`
	Param string `json:"param" msgpack:"param"`
}

type Edge struct {
	Source Handle   `json:"source" msgpack:"source"`
	Target Handle   `json:"target" msgpack:"target"`
	Kind   EdgeKind `json:"kind" msgpack:"kind"`
}

type Stage struct {
	Key    string   `json:"key" msgpack:"key"`
	Nodes  []string `json:"nodes" msgpack:"nodes"`
	Strata Strata   `json:"strata" msgpack:"strata"`
}

type Sequence struct {
	Key    string  `json:"key" msgpack:"key"`
	Stages []Stage `json:"stages" msgpack:"stages"`
}

type Body struct {
	Raw string                  `json:"raw" msgpack:"raw"`
	AST antlr.ParserRuleContext `json:"-"`
}

type Function struct {
	Key      string          `json:"key" msgpack:"key"`
	Body     Body            `json:"body" msgpack:"body"`
	Config   types.Params    `json:"config" msgpack:"config"`
	Inputs   types.Params    `json:"inputs" msgpack:"inputs"`
	Outputs  types.Params    `json:"outputs" msgpack:"outputs"`
	Channels symbol.Channels `json:"channels" msgpack:"channels"`
}

type Node struct {
	Key      string          `json:"key" msgpack:"key"`
	Type     string          `json:"type" msgpack:"type"`
	Config   types.Params    `json:"config" msgpack:"config"`
	Inputs   types.Params    `json:"inputs" msgpack:"inputs"`
	Outputs  types.Params    `json:"outputs" msgpack:"outputs"`
	Channels symbol.Channels `json:"channels" msgpack:"channels"`
}

type IR struct {
	Functions Functions                              `json:"functions" msgpack:"functions"`
	Nodes     Nodes                                  `json:"nodes" msgpack:"nodes"`
	Edges     Edges                                  `json:"edges" msgpack:"edges"`
	Strata    Strata                                 `json:"strata" msgpack:"strata"`
	Sequences Sequences                              `json:"sequences" msgpack:"sequences"`
	Symbols   *symbol.Scope                          `json:"-"`
	TypeMap   map[antlr.ParserRuleContext]types.Type `json:"-"`
}
