# Code generated by Oracle. DO NOT EDIT.

from __future__ import annotations
from typing import Literal, TypeAlias
from enum import IntEnum
from pydantic import BaseModel, Field
from synnax.telem import TimeSpan, DataType
from synnax.ontology.payload import ID
from synnax.x import control

Key = int


OperationType = Literal["min", "max", "avg", "none"]


class Concurrency(IntEnum):
    exclusive = 0
    shared = 1

Name: TypeAlias = str


class Operation(BaseModel):
    type: OperationType
    reset_channel: Key = Field(default=0)
    duration: TimeSpan = Field(default=0)


class Payload(BaseModel):
    key: Key
    name: Name
    leaseholder: int
    data_type: DataType
    is_index: bool
    index: Key
    alias: str | None = None
    virtual: bool = Field(default=False)
    internal: bool = Field(default=False)
    expression: str = Field(default="")
    operations: list[Operation] | None = None
    concurrency: control.Concurrency | None = None

    def __hash__(self) -> int:
        return hash(self.key)


class New(Payload):
    key: Key | None = None
    leaseholder: int | None = None
    index: Key | None = None
    is_index: bool | None = None
    internal: bool | None = None
    virtual: bool | None = None
    expression: str | None = Field(default=None, default="")
    operations: list[Operation] | None = None
    concurrency: control.Concurrency | None = None


ONTOLOGY_TYPE = ID(type="channel")


def ontology_id(key: int) -> ID:
    return ID(type="channel", key=str(key))
