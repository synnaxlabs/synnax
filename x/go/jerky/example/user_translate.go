// Code generated by jerky. DO NOT EDIT.

package example

import (
	user "github.com/synnaxlabs/x/jerky/example/types/user"
	address "github.com/synnaxlabs/x/jerky/example/types/address"
	"github.com/google/uuid"
	"time"
	"github.com/synnaxlabs/x/telem"
)

// UserToProto converts a User domain struct to its protobuf representation.
func UserToProto(m User) *user.Current {
	return &user.Current{
		Key: m.Key.String(),
		ID: uint32(m.ID),
		Name: m.Name,
		Email: m.Email,
		Age: m.Age,
		Active: m.Active,
		Balance: m.Balance,
		CreatedAt: m.CreatedAt.UnixNano(),
		LastSeen: int64(m.LastSeen),
		Tags: m.Tags,
		Role: m.Role,
		Verified: m.Verified,
		Score: m.Score,
		Department: m.Department,
		Address: AddressToProto(m.Address),
		Addresses: func() []*address.Current { result := make([]*address.Current, len(m.Addresses)); for i, v := range m.Addresses { result[i] = AddressToProto(v) }; return result }(),
	}
}

// UserFromProto converts a protobuf User to its domain struct representation.
func UserFromProto(pb *user.Current) (User, error) {
	var m User
	var err error
	m.Key, err = uuid.Parse(pb.Key)
	if err != nil {
		return m, err
	}
	m.ID = UserID(pb.ID)
	m.Name = pb.Name
	m.Email = pb.Email
	m.Age = pb.Age
	m.Active = pb.Active
	m.Balance = pb.Balance
	m.CreatedAt = time.Unix(0, pb.CreatedAt)
	m.LastSeen = telem.TimeStamp(pb.LastSeen)
	m.Tags = pb.Tags
	m.Role = pb.Role
	m.Verified = pb.Verified
	m.Score = pb.Score
	m.Department = pb.Department
	m.Address = AddressFromProto(pb.Address)
	m.Addresses = func() []Address { result := make([]Address, len(pb.Addresses)); for i, v := range pb.Addresses { result[i] = AddressFromProto(v) }; return result }()
	return m, nil
}
