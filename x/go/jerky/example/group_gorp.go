// Code generated by jerky. DO NOT EDIT.

package example

import (
	"github.com/synnaxlabs/x/jerky/example/types"
	"github.com/google/uuid"
	"google.golang.org/protobuf/proto"
)

// MarshalGorp serializes a Group to bytes using protobuf.
func (m Group) MarshalGorp() ([]byte, error) {
	return proto.Marshal(&types.Group{
		Key: m.Key.String(),
		Name: m.Name,
		Description: m.Description,
		MemberCount: m.MemberCount,
	})
}

// UnmarshalGorp deserializes bytes into a Group.
// It expects data to be in the current proto format. Run migrations at startup
// using GroupMigrator to convert legacy data before normal operation.
func (m *Group) UnmarshalGorp(data []byte) error {
	var pb types.Group
	if err := proto.Unmarshal(data, &pb); err != nil {
		return err
	}
	var err error
	m.Key, err = uuid.Parse(pb.Key)
	if err != nil {
		return err
	}
	m.Name = pb.Name
	m.Description = pb.Description
	m.MemberCount = pb.MemberCount
	return nil
}
