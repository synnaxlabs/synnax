---
import Feedback from "@/components/feedback/Feedback.astro";
import { OnThisPage as OTP } from "@/components/OnThisPage/OnThisPage";
import { Icon, Divider, Text, Flex } from "@synnaxlabs/pluto";
const props = Astro.props;
---

<Flex.Box el="nav" className="on-this-page" gap={4}>
    <Flex.Box direction="y" gap={2}>
        <Text.Text level="h5">
            <Icon.Log style={{ transform: "scale(0.8)" }} />
            On this page
        </Text.Text>
        <OTP
            client:only="react"
            headings={props.headings}
            url={props.url}
            platforms={props.platforms}
        />
    </Flex.Box>
    <Flex.Box direction="y" gap={2}>
        <Divider.Divider direction="x" />
        <Flex.Box direction="x" justify="end">
            <Feedback />
        </Flex.Box>
    </Flex.Box>
</Flex.Box>

<style is:global>
    .on-this-page {
        top: 22rem;
        width: 235px;

        @media (max-width: 1100px) {
            display: none !important;
        }

        .pluto-dialog {
            margin-bottom: 1rem;
        }

        flex-shrink: 0;
        & h5 {
            font-weight: 500;
        }

        .heading {
            border-bottom: none;
        }

        & .header-link {
            box-shadow: inset -1px 0 0 0 var(--pluto-border-color);
            &.depth-3 {
                margin-left: 2rem;
            }
        }

        & .pluto-menu-item {
            border-radius: 0 !important;
            white-space: normal;
            margin: 0;
            height: fit-content;
            display: block;
            padding: 0.75rem 2rem !important;
            transition: box-shadow 0.2s ease;
            background: none !important;
            color: var(--pluto-gray-l8) !important;
            text-decoration: none !important;
            font-weight: 400 !important;
            &.pluto--selected,
            &:hover {
                box-shadow: inset -2px 0 0 0 var(--pluto-primary-z);
                &.pluto-text--small {
                    font-weight: 500 !important;
                    color: var(--pluto-text-color) !important;
                }
            }
        }
    }
</style>
