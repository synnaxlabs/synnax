---
import { Icon } from "@synnaxlabs/pluto";

interface Props {
    open?: boolean;
}

const { open = false } = Astro.props;
---

<details open={open}>
    <summary>
        <slot name="summary" />
        <Icon.Caret.Right className="indicator" />
    </summary>
    <div class="content">
        <slot />
    </div>
</details>

<style is:global>
    details {
        margin: 3rem 0;
        border: var(--pluto-border);
        border-radius: 1rem;
        overflow: hidden;
        background: var(--pluto-gray-l1);
        max-height: 10rem;
        transition: max-height 0.3s ease;

        .content {
            padding: 0 2rem;
        }

        &[open] {
            max-height: 4000px;
            summary {
                border-bottom: var(--pluto-border);
                & .indicator {
                    transform: rotate(90deg);
                }
            }
        }
        & .astro-code-wrapper {
            margin: 0 !important;
            .astro-code {
                border: none !important;
            }
        }
        .table-wrapper {
            margin: 0.5rem 0 !important;
            border: none !important;
        }
        &:not([open]):active {
            border-color: var(--pluto-gray-l5);
        }
        summary {
            &::marker {
                content: none;
            }
            position: relative;
            cursor: pointer;

            p,
            small,
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                margin: 0 !important;
                color: var(--pluto-gray-l10-90);
                display: inline-block;
                & svg {
                    margin-right: 1rem;
                }
            }

            display: flex;
            align-items: center;

            & .indicator {
                position: absolute;
                right: 2rem;
                fill: var(--pluto-gray-l10);
                margin-right: 1rem;
                transition: transform 0.2s;
                height: 2.5rem;
                width: 2.5rem;
                transform: rotate(180deg);
            }

            width: 100%;
            background: var(--pluto-gray-l2-70);
            padding: 1.666rem 2rem;
            &:hover {
                transition: background-color 0.2s;
                background-color: var(--pluto-gray-l3);
            }
        }
    }
</style>
