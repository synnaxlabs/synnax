---
layout: "@/layouts/Reference.astro"
title: "Schematics"
heading: "Schematics"
description: "Control hardware using schematics."
prev: "Logs"
prevURL: "/reference/console/logs"
next: "Tables"
nextURL: "/reference/console/tables"
---

import { Divider, Note, Icon, Flex } from "@synnaxlabs/pluto";
import { Image, Video } from "@/components/Media";
import Table from "@/components/Table.astro";
import { mdxOverrides } from "@/components/mdxOverrides";
export const components = mdxOverrides;

A schematic is used to see a diagram of your physical or simulated system. It displays
live sensor data and can be used to exercise manual control by changing the values of
channels tied to actuators. We've added a simple example of a schematic below:

<Image client:only="react" id="console/schematics/example" />

[Download the example schematic](/examples/tpc-operator.json) to try it yourself. See
the
[TPC example README](https://github.com/synnaxlabs/synnax/tree/main/client/py/examples/control/tpc)
for configuration instructions.

<Divider.Divider x />

## Creating a Schematic

Creating a schematic is as simple as adding a new tab and selecting the schematic
visualization:

<Video client:only="react" id="console/schematics/create" />

<Note.Note variant="warning">
  Make sure that you are working in an active
  [workspace](/reference/console/workspaces)! If your schematic is not created in a
  workspace, it will not be saved permanently to Synnax.
</Note.Note>

<Divider.Divider x />

### Export a Schematic

You can download a schematic as a JSON file so that it can be easily sent and loaded.

To download, right click on the schematics name in the resources toolbar and click
"Download as JSON":

<Video client:only="react" id="console/schematics/download" />

### Import a Schematic

To import a schematic, you can drag and drop from your file system or right click on a
workspace name in the ontology menu:

<Video client:only="react" id="console/schematics/upload" />

<Divider.Divider x />

## Modes

Schematics have three modes: **view**, **edit**, and **control**. To change modes, use
the controls in the bottom-left hand corner of the schematic.

<Table>
  <thead>
    <tr>
      <th style={{ whiteSpace: "nowrap" }}>Mode</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{ whiteSpace: "nowrap" }}>
        <b>View</b>
      </td>
      {
        <td>
          Live data from the Core is displayed on the schematic. Symbols are not
          editable and the user cannot change the system state.
        </td>
      }
    </tr>
    <tr>
      <td style={{ whiteSpace: "nowrap" }}>
        <b>Edit</b>
      </td>
      <td>Symbols can be added and moved, and their properties can be edited.</td>
    </tr>
    <tr>
      <td style={{ whiteSpace: "nowrap" }}>
        <b>Control</b>
      </td>
      <td>The user can click on symbols such as valves and buttons to control them.</td>
    </tr>
  </tbody>
</Table>

<Divider.Divider x />

## The Symbols Library

Schematics are assembled by dragging symbols out of the library and onto the screen.
These symbols are visual representation of sensors, actuators, and other components on
your hardware system. If the symbols are not appearing on the bottom of the screen, make
sure to click the visualization <Icon.Visualize /> icon in the bottom-left corner.

Synnax has a collection of built-in symbols including valves, live sensor values,
buttons, and tanks.

<Divider.Divider x />

## Changing Symbol Properties

When selected, a symbol's properties will appear in the bottom toolbar. There are
several tabs that can be used to fine-tune the look and behavior of the symbol.

### Style Tab

The style tab on allows users to edit (<Icon.Edit color="var(--pluto-primary-z)"/>) the symbol's label, size, orientation, color, and
other visual properties.

<Table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <b>Label</b>
      </td>
      <td>The text that appears by the symbol.</td>
    </tr>
    <tr>
      <td>
        <b>Label Size</b>
      </td>
      <td>The size of the label.</td>
    </tr>
    <tr>
      <td>
        <b>Color</b>
      </td>
      <td>The color of the symbol.</td>
    </tr>
    <tr>
      <td>
        <b>Normally Open</b>
      </td>
      {
        <td>
          Invert the visual state of the valve when True
        </td>
      }
    </tr>
    <tr>
      <td>
        <b>Units</b>
      </td>
      <td>Determines what units a value symbol is displaying.</td>
    </tr>
    <tr>
      <td>
        <b>Orientation</b>
      </td>
      {
        <td>
          Determines the orientation of the symbol and the relative placement of the
          label.
        </td>
      }
    </tr>
  </tbody>
</Table>

### Telemetry Tab

The telemetry tab is available on symbols that receive data, such as the value and light
symbols. After selecting a channel from the dropdown, the schematic will fetch and
display the live data from that channel.

The telemetry tab can have the following properties:

<Table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <b>Input Channel</b>
      </td>
      <td>The channel to stream data from.</td>
    </tr>
    <tr>
      <td>
        <b>Precision</b>
      </td>
      <td>The number of decimal places to display.</td>
    </tr>
    <tr>
      <td>
        <b>Averaging Window</b>
      </td>
      {
        <td>
          Display a rolling average for the input channel. This does not 
          change the underlying value written to the Synnax Core.
        </td>
      }
    </tr>
    <tr>
      <td>
        <b>Stale Timeout</b>
      </td>
      {
        <td>
          The amount of seconds without input channel telemetry before 
          the element state registers as stale.
        </td>
      }
    </tr>
        <tr>
      <td>
        <b>Stale Color</b>
      </td>
      {
        <td>
          The color the element will change to when telemetry is stale.
        </td>
      }
    </tr>
  </tbody>
</Table>

<Video client:only="react" id="console/schematics/value" />

### Control Tab

The control tab is available on symbols that can be actuated. Controllable symbols have
two main properties:

<Table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <b>State Channel</b>
      </td>
      {
        <td>
          Represents the display state of the symbol. If the input channel has a value
          of <code>1</code>, the symbol will be display as {" "}<code>activated</code>.
        </td>
      }
    </tr>
    <tr>
      <td>
        <b>Command Channel</b>
      </td>
      {
        <td>
          Channel to write command to when the symbol is clicked. If the symbol is{" "}
          <code>deactivated</code>, clicking it will write <code>1</code> to the output
          channel. If the symbol is{" "}<code>activated</code>, clicking it will write
          <code>0</code> to the output channel.
        </td>
      }
    </tr>
  </tbody>
</Table>

<Divider.Divider x />

## Stylistic Modifying the Schematic

There are many ways that you can change the visuals of a schematic.

### Connection Lines

Every symbol has locations to attach connection lines. When hovering over an symbol,
these attachment points appear. To draw a connection line, click on an attachment point
and drag the line to a different symbol:

<Video client:only="react" id="console/schematics/connections" />

### Aligning Elements

To align elements, create a selection box by clicking and dragging on the canvas. Then,
use the vertical or horizontal alignment buttons to align the selected elements:

<Video client:only="react" id="console/schematics/align-items" />

### Changing Colors

You can also change the color of multiple symbols together in the same manner:

<Video client:only="react" id="console/schematics/change-color" />

<Divider.Divider x />

## Control Mode 

In control mode, elements on the schematic are able to be activated for manual control
of the system. Clicking on an actionable element, such as a valve, switch, or button,
allows you to activate the output channel on that element. The indicator next to the 
element displays the control status. 

<Icon.Circle color="var(--pluto-primary-z)" /> Blue circle is indicates the current
user has control. 

<Icon.Circle color="green" /> Green circle indicates the current user has absolute 
control. 

<Icon.Circle color="red" /> Red circle indicates the current user does not have 
control as the command channel is being controlled by another user or an automated
sequence.

The color of the bar indicates what is controlling the elements on the Schematic. There
is a legend on the display indicating what controlling node is what color.

<Video client:only="react" id="console/schematics/valve" />

<Divider.Divider x />

## Snapshotting a Schematic

Oftentimes, you will want to save the configuration of a schematic to a particular
range, so you can see exactly how a schematic looked at a certain point in time. To do
this, you can snapshot a schematic to a range by finding the schematic in the resources
toolbar, opening the context menu, and snapshotting the schematic to a range.

<Video client:only="react" id="console/schematics/snapshot" />

<Divider.Divider x />

## Creating Custom Symbols

You can create your own schematic symbols by using the built-in symbol editor. These
symbols can be used as part of a schematic, and can also actuate channels when clicked.

### Creating a Symbol Group

The first step is to create a new symbol group within the schematic symbols browser.

<Video client:only="react" id="console/schematics/symbol-create-group" />

### Opening the Editing Dialog

Once you've created a group, open the create symbol dialog and import an SVG file.

<Video client:only="react" id="console/schematics/symbol-import-svg" />

### Static Symbols vs. Actuators

Custom symbols come in two flavors: static symbols and actuators. Static symbols are
used for background images and other non-interactive elements. They have a single color
palette, and are not connected to any telemetry sources.

Actuators are interactive elements that can command outputs to 1 or 0 (much like the
built-in valves and switches). Actuators have two states, "base" and "active". The base
state is what the symbol looks like when it is not activated, meaning the channel that
it is connected to has a zero value. The active state is what the symbol looks like when
it is activated, meaning the channel that it is connected to has a one value.

### Choosing Color Palettes

Each state state in an actuator has its own color palette, which can be used to change
the colors of the symbol when it is activated.

<Flex.Box x justify="center">
  <Image
    client:only="react"
    id="console/schematics/symbol-color-regions"
    style={{ width: 250 }}
  />
</Flex.Box>

When an SVG is imported, we'll automatically identify regions of the SVG by their color.
To change the colors of a particular region, simply click on the color swatches and and
choose a new color.

To edit how an actuator will look when clicked, select the "active" tab under the states
section, and edit the colors of the region.

### Scaling the Symbol

By default, Synnax uses the dimensions of the imported SVG to determin the default size
of the symbol when it is added to a schematic. To change this scale, simply drag the
slider or enter a new value in the properties field.
